{"version":3,"sources":["../../../../app/middleware/passport/providers/facebook.js"],"names":["passport","userModel","use","clientID","facebook","clientSecret","callbackURL","profileFields","token","refreshToken","profile","done","process","nextTick","user","_json","first_name","last_name","id","email","passportFindOrCreate"],"mappings":";;;;;;AACA;;;;AAEA;;;;AACA;;;;;;kBAEe,UAACA,QAAD,EAAWC,SAAX,EAAyB;AACtCD,WAASE,GAAT,CAAa,+BAAqB;AAChCC,cAAgB,eAAKC,QAAL,CAAcD,QADE;AAEhCE,kBAAgB,eAAKD,QAAL,CAAcC,YAFE;AAGhCC,iBAAgB,eAAKA,WAAL,GAAiB,UAHD;AAIhCC,mBAAgB,CAAC,IAAD,EAAO,QAAP,EAAiB,MAAjB;AAJgB,GAArB,EAKV,UAASC,KAAT,EAAgBC,YAAhB,EAA8BC,OAA9B,EAAuCC,IAAvC,EAA6C;AAC5CC,YAAQC,QAAR,CAAiB,YAAW;AAC1B,UAAMC,OAAO;AACX,iBAASJ,QAAQK,KAAR,CAAcC,UADZ;AAEX,iBAASN,QAAQK,KAAR,CAAcE,SAFZ;AAGX,oBAAY,UAHD;AAIX,cAAMP,QAAQQ,EAJH;AAKX,iBAASR,QAAQK,KAAR,CAAcI;AALZ,OAAb;;AAQA,yBAAWC,oBAAX,CAAgCN,IAAhC,EAAsCH,IAAtC;AACD,KAVD;AAWD,GAjBU,CAAb;AAkBD,C,EAzBD","file":"facebook.js","sourcesContent":["// Passport plugin to add the facebook authentication strategy.\nimport FacebookStrategy, { Strategy } from 'passport-facebook';\n\nimport controller from './../../../controller/passport';\nimport auth from './../../../config/auth.json';\n\nexport default (passport, userModel) => {\n  passport.use(new FacebookStrategy({\n    clientID      : auth.facebook.clientID,\n    clientSecret  : auth.facebook.clientSecret,\n    callbackURL   : auth.callbackURL+'facebook',\n    profileFields : ['id', 'emails', 'name']\n  }, function(token, refreshToken, profile, done) {\n      process.nextTick(function() {\n        const user = {\n          \"fname\": profile._json.first_name,\n          \"lname\": profile._json.last_name,\n          \"provider\": \"facebook\",\n          \"id\": profile.id,\n          \"email\": profile._json.email\n        };\n\n        controller.passportFindOrCreate(user, done);\n      });\n    }));\n}\n"]}