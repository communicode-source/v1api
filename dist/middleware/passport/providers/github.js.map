{"version":3,"sources":["../../../../app/middleware/passport/providers/github.js"],"names":["GithubStrategy","require","Strategy","passportController","auth","module","exports","passport","userModel","use","clientID","github","clientSecret","callbackURL","profileFields","token","refreshToken","profile","done","process","nextTick","user","_json","name","split","length","id","email","passportFindOrCreate"],"mappings":";;AAAA;AACA,IAAMA,iBAAoBC,QAAQ,iBAAR,EAA2BC,QAArD;;AAEA,IAAMC,qBAAqBF,QAAQ,gCAAR,CAA3B;AACA,IAAMG,OAAoBH,QAAQ,6BAAR,CAA1B;;AAEAI,OAAOC,OAAP,GAAiB,UAACC,QAAD,EAAWC,SAAX,EAAyB;AACxCD,WAASE,GAAT,CAAa,IAAIT,cAAJ,CAAmB;AAC9BU,cAAgBN,KAAKO,MAAL,CAAYD,QADE;AAE9BE,kBAAgBR,KAAKO,MAAL,CAAYC,YAFE;AAG9BC,iBAAgBT,KAAKS,WAAL,GAAiB,QAHH;AAI9BC,mBAAgB,CAAC,IAAD,EAAO,QAAP,EAAiB,MAAjB;AAJc,GAAnB,EAKV,UAASC,KAAT,EAAgBC,YAAhB,EAA8BC,OAA9B,EAAuCC,IAAvC,EAA6C;AAC5CC,YAAQC,QAAR,CAAiB,YAAM;AACrB,UAAMC,OAAO;AACX,iBAASJ,QAAQK,KAAR,CAAcC,IAAd,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CADE;AAEX,iBAASP,QAAQK,KAAR,CAAcC,IAAd,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8BP,QAAQK,KAAR,CAAcC,IAAd,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8BC,MAA9B,GAAuC,CAArE,CAFE;AAGX,oBAAY,QAHD;AAIX,cAAMR,QAAQS,EAJH;AAKX,iBAAST,QAAQK,KAAR,CAAcK;AALZ,OAAb;;AAQAxB,yBAAmByB,oBAAnB,CAAwCP,IAAxC,EAA8CH,IAA9C;AACD,KAVD;AAWD,GAjBU,CAAb;AAkBD,CAnBD","file":"github.js","sourcesContent":["// Passport plugin to add the github authentication strategy.\nconst GithubStrategy    = require('passport-github').Strategy;\n\nconst passportController = require('./../../../controller/passport');\nconst auth              = require('./../../../config/auth.json');\n\nmodule.exports = (passport, userModel) => {\n  passport.use(new GithubStrategy({\n    clientID      : auth.github.clientID,\n    clientSecret  : auth.github.clientSecret,\n    callbackURL   : auth.callbackURL+'github',\n    profileFields : ['id', 'emails', 'name']\n  }, function(token, refreshToken, profile, done) {\n      process.nextTick(() => {\n        const user = {\n          \"fname\": profile._json.name.split(\" \")[0],\n          \"lname\": profile._json.name.split(\" \")[profile._json.name.split(\" \").length - 1],\n          \"provider\": \"github\",\n          \"id\": profile.id,\n          \"email\": profile._json.email\n        };\n\n        passportController.passportFindOrCreate(user, done);\n      });\n    }));\n}\n"]}