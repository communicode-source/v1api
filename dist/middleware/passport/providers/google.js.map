{"version":3,"sources":["../../../../app/middleware/passport/providers/google.js"],"names":["passport","userModel","use","clientID","google","clientSecret","callbackURL","callbackUrl","profileFields","token","refreshToken","profile","done","process","nextTick","user","displayName","split","length","id","email","passportFindOrCreate"],"mappings":";;;;;;AACA;;;;AAEA;;;;AACA;;;;;;kBAEe,UAACA,QAAD,EAAWC,SAAX,EAAyB;AACtCD,WAASE,GAAT,CAAa,kCAAmB;AAC9BC,cAAgB,eAAKC,MAAL,CAAYD,QADE;AAE9BE,kBAAgB,eAAKD,MAAL,CAAYC,YAFE;AAG9BC,iBAAgB,eAAKC,WAAL,GAAiB,QAHH;AAI9BC,mBAAgB,CAAC,IAAD,EAAO,QAAP,EAAiB,MAAjB;AAJc,GAAnB,EAKV,UAASC,KAAT,EAAgBC,YAAhB,EAA8BC,OAA9B,EAAuCC,IAAvC,EAA6C;AAC5CC,YAAQC,QAAR,CAAiB,YAAM;AACrB,UAAMC,OAAO;AACX,iBAASJ,QAAQK,WAAR,CAAoBC,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CADE;AAEX,iBAASN,QAAQK,WAAR,CAAoBC,KAApB,CAA0B,GAA1B,EAA+BN,QAAQK,WAAR,CAAoBC,KAApB,CAA0B,GAA1B,EAA+BC,MAA/B,GAAwC,CAAvE,CAFE;AAGX,oBAAY,QAHD;AAIX,cAAMP,QAAQQ,EAJH;AAKX,iBAASR,QAAQS;AALN,OAAb;;AAQA,yBAAWC,oBAAX,CAAgCN,IAAhC,EAAsCH,IAAtC;AACD,KAVD;AAWD,GAjBU,CAAb;AAkBD,C,EAzBD","file":"google.js","sourcesContent":["// Passport plugin to add the google authentication strategy.\nimport GoogleStrategy, { Strategy } from 'passport-google-oauth2';\n\nimport controller from './../../../controller/passport';\nimport auth from './../../../config/auth.json';\n\nexport default (passport, userModel) => {\n  passport.use(new GoogleStrategy({\n    clientID      : auth.google.clientID,\n    clientSecret  : auth.google.clientSecret,\n    callbackURL   : auth.callbackUrl+'google',\n    profileFields : ['id', 'emails', 'name']\n  }, function(token, refreshToken, profile, done) {\n      process.nextTick(() => {\n        const user = {\n          \"fname\": profile.displayName.split(\" \")[0],\n          \"lname\": profile.displayName.split(\" \")[profile.displayName.split(\" \").length - 1],\n          \"provider\": \"google\",\n          \"id\": profile.id,\n          \"email\": profile.email\n        };\n\n        controller.passportFindOrCreate(user, done);\n      });\n    }));\n}\n"]}