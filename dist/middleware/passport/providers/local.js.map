{"version":3,"sources":["../../../../app/middleware/passport/providers/local.js"],"names":["passport","strategies","i","use","usernameField","passwordField","passReqToCallback","req","email","password","done","process","nextTick","passportCreateLocalUser","passportLogInCurrentUser"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,QAAD,EAAc;AAC3B,MAAMC,aAAa,CAAC,kBAAD,EAAqB,wBAArB,CAAnB;AACA,OAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA2B;AACzBF,aAASG,GAAT,CAAaF,WAAWC,CAAX,CAAb,EAA4B,4BAAkB;AAC5CE,qBAAe,OAD6B;AAE5CC,qBAAe,UAF6B;AAG5CC,yBAAmB;AAHyB,KAAlB,EAK1B,UAASC,GAAT,EAAcC,KAAd,EAAqBC,QAArB,EAA+BC,IAA/B,EAAqC;AACnCC,cAAQC,QAAR,CAAiB,YAAW;AAC1B,2BAAWC,uBAAX,CAAmCN,GAAnC,EAAwCC,KAAxC,EAA+CC,QAA/C,EAAyDC,IAAzD;AACD,OAFD;AAGD,KATyB,CAA5B;AAWD;;AAEDV,WAASG,GAAT,CAAa,aAAb,EAA4B,4BAAkB;AAC5CC,mBAAe,OAD6B;AAE5CC,mBAAe;AAF6B,GAAlB,EAI5B,UAASG,KAAT,EAAgBC,QAAhB,EAA0BC,IAA1B,EAAgC;AAC9BC,YAAQC,QAAR,CAAiB,YAAW;AAC1B,yBAAWE,wBAAX,CAAoCN,KAApC,EAA2CC,QAA3C,EAAqDC,IAArD;AACD,KAFD;AAGD,GAR2B,CAA5B;AASD,C","file":"local.js","sourcesContent":["import LocalStrategy, { Strategy } from 'passport-local';\nimport controller from './../../../controller/passport';\nimport auth from './../../../config/auth.json';\n\nexport default (passport) => {\n  const strategies = ['local-signup-dev', 'local-signup-nonprofit'];\n  for(let i = 0; i < 2; i++) {\n    passport.use(strategies[i], new LocalStrategy({\n      usernameField: 'email',\n      passwordField: 'password',\n      passReqToCallback: true\n    },\n      function(req, email, password, done) {\n        process.nextTick(function() {\n          controller.passportCreateLocalUser(req, email, password, done);\n        });\n      }\n    ));\n  };\n\n  passport.use('local-login', new LocalStrategy({\n    usernameField: 'email',\n    passwordField: 'password'\n  },\n  function(email, password, done) {\n    process.nextTick(function() {\n      controller.passportLogInCurrentUser(email, password, done);\n    });\n  }));\n}\n"]}